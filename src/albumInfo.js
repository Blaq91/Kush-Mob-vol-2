var fs = require('fs');var id3 = require('id3js');var path = require('path');var fileExists = require('./fileExists');var filterFileList = require('./filterFileList');/*** Tries to get album info based on mp3s found in directory* @param {string} directory (eg. /path/to/music)* @param {albumInfo~requestCallback} callback*/module.exports = function (directory, callback) {    var albumData = {};    filterFileList(directory, 'mp3', function (err, data) {		if (err) {			callback(err, null);			return;		}		if(data.length > 0) {			//try to get info from first mp3 found			//todo: loop over mp3s?			id3({ file: path.join(directory, data[0]), type: id3.OPEN_LOCAL }, function(err, tags) {				if (err) {					callback(err, null);					return;				}				albumData.artist = tags.artist;				albumData.album = tags.album;								//looks for folder.jpg for album art				//todo: make this configurable or search online maybe?				albumData.albumArt = path.join(directory, 'folder.jpg');				if(!fileExists(albumData.albumArt)) {					albumData.albumArt = path.resolve(__dirname, 'default.jpg');				}				callback(err, albumData);			});		}	});} /** * This callback is displayed as part of the albumInfo class. * @callback albumInfo~requestCallback * @param {null|*} err * @param {{artist: string, album: string, albumArt: string}|null} albumData  */